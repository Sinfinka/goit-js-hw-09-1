{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["'use strict';\n\n//знайшла функцію, що дозволяє записувати дані в localStorage із затримкою\nconst debounce = function (func, wait, immediate) {\n  let timeout;\n\n  return function executedFunction() {\n    const context = this;\n    const args = arguments;\n\n    const later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n\n//створила ключ для збереження в локалстор.\nconst FEEDBACK_STORAGE_KEY = 'feedback';\nconst form = document.querySelector('.feedback-form');\n\n//отримала попередні дані з лок.стор. (якщо вони є).\n//Огорнула код в трай, щоб уникнути помилок при парсингу.\ntry {\n  const initialFormData = JSON.parse(\n    localStorage.getItem(FEEDBACK_STORAGE_KEY)\n  );\n\n  //зробила масив з елементів форми (тому що був псевдомасив і не працював форіч)\n  //тепер модна встановити данні з лок. сховища, якщо вони є.\n  Array.from(form.elements).forEach(element => {\n    const storageValue = initialFormData[element.name];\n    if (storageValue) {\n      element.value = storageValue;\n    }\n  });\n} catch (error) {\n  console.log('ERROR');\n}\n\n//створила функцію для запису даних з затримкою. Функція приймає 3 аргумента.\n//func, wait, immediate(не вказувала, за замовчуванням цей аргумент undefined\n//і функція буде виконуаатись з затримкою)\n//Далі отримала дані з форми за допомогою FormData і зробила з них об'єкт.\n//Цей об'єкт перевела в JSON і додала в локальне сховише.\nconst saveToLocalStorageDebounced = debounce(() => {\n  const formData = new FormData(form);\n  const formObject = {};\n  formData.forEach((value, key) => {\n    formObject[key] = value;\n  });\n  localStorage.setItem(FEEDBACK_STORAGE_KEY, JSON.stringify(formObject));\n}, 250);\n\n//додала прслух. подій до інпутів і викликала функцію для затримки збереження.\nform.addEventListener('input', () => {\n  saveToLocalStorageDebounced();\n});\n\n//додала прослуховувач подій на подію сабміт. Відмінила дефолтну поведінку браузера,\n//видалила збережені попередньо дані в лок. сховищі за ключем.\n//Очистила форму.\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  localStorage.removeItem(FEEDBACK_STORAGE_KEY);\n\n  form.reset();\n});\n"],"names":["debounce","func","wait","immediate","timeout","context","args","later","callNow","FEEDBACK_STORAGE_KEY","form","initialFormData","element","storageValue","saveToLocalStorageDebounced","formData","formObject","value","key","event"],"mappings":"wFAGA,MAAMA,EAAW,SAAUC,EAAMC,EAAMC,EAAW,CAChD,IAAIC,EAEJ,OAAO,UAA4B,CACjC,MAAMC,EAAU,KACVC,EAAO,UAEPC,EAAQ,UAAY,CACxBH,EAAU,KACLD,GAAWF,EAAK,MAAMI,EAASC,CAAI,CAC9C,EACUE,EAAUL,GAAa,CAACC,EAC9B,aAAaA,CAAO,EACpBA,EAAU,WAAWG,EAAOL,CAAI,EAC5BM,GAASP,EAAK,MAAMI,EAASC,CAAI,CACzC,CACA,EAGMG,EAAuB,WACvBC,EAAO,SAAS,cAAc,gBAAgB,EAIpD,GAAI,CACF,MAAMC,EAAkB,KAAK,MAC3B,aAAa,QAAQF,CAAoB,CAC7C,EAIE,MAAM,KAAKC,EAAK,QAAQ,EAAE,QAAQE,GAAW,CAC3C,MAAMC,EAAeF,EAAgBC,EAAQ,MACzCC,IACFD,EAAQ,MAAQC,EAEtB,CAAG,CACH,MAAE,CACA,QAAQ,IAAI,OAAO,CACrB,CAOA,MAAMC,EAA8Bd,EAAS,IAAM,CACjD,MAAMe,EAAW,IAAI,SAASL,CAAI,EAC5BM,EAAa,CAAA,EACnBD,EAAS,QAAQ,CAACE,EAAOC,IAAQ,CAC/BF,EAAWE,GAAOD,CACtB,CAAG,EACD,aAAa,QAAQR,EAAsB,KAAK,UAAUO,CAAU,CAAC,CACvE,EAAG,GAAG,EAGNN,EAAK,iBAAiB,QAAS,IAAM,CACnCI,GACF,CAAC,EAKDJ,EAAK,iBAAiB,SAAUS,GAAS,CACvCA,EAAM,eAAc,EACpB,aAAa,WAAWV,CAAoB,EAE5CC,EAAK,MAAK,CACZ,CAAC"}