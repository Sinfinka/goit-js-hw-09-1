{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["'use strict';\n\nconst debounce = (func, wait, immediate) => {\n  let timeout;\n\n  return function executedFunction() {\n    const context = this;\n    const args = arguments;\n\n    const later = () => {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n\n    if (callNow) func.apply(context, args);\n  };\n};\n\nconst FEEDBACK_STORAGE_KEY = 'feedback';\nconst form = document.querySelector('.feedback-form');\n\nconst getFormData = () => {\n  const formData = new FormData(form);\n  const formObject = {};\n\n  formData.forEach((value, key) => {\n    formObject[key] = value.trim();\n  });\n\n  return formObject;\n};\n\ntry {\n  const initialFormData =\n    JSON.parse(localStorage.getItem(FEEDBACK_STORAGE_KEY)) || {};\n\n  Array.from(form.elements).forEach(element => {\n    const storageValue = initialFormData[element.name];\n\n    if (storageValue !== undefined && storageValue !== null) {\n      element.value = storageValue;\n    }\n  });\n} catch (error) {\n  console.error('Error while retrieving initial form data:', error);\n}\n\nconst saveToLocalStorageDebounced = debounce(() => {\n  const formObject = getFormData();\n  localStorage.setItem(FEEDBACK_STORAGE_KEY, JSON.stringify(formObject));\n}, 250);\n\nform.addEventListener('input', () => {\n  saveToLocalStorageDebounced();\n});\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const formObject = getFormData();\n  const isFormValid = Object.values(formObject).every(value => !!value.trim());\n\n  if (isFormValid) {\n    console.log(formObject);\n    localStorage.removeItem(FEEDBACK_STORAGE_KEY);\n    form.reset();\n  } else {\n    alert('Please fill out all the form fields');\n  }\n});\n"],"names":["debounce","func","wait","immediate","timeout","context","args","later","callNow","FEEDBACK_STORAGE_KEY","form","getFormData","formData","formObject","value","key","initialFormData","element","storageValue","error","saveToLocalStorageDebounced","event"],"mappings":"wFAEA,MAAMA,EAAW,CAACC,EAAMC,EAAMC,IAAc,CAC1C,IAAIC,EAEJ,OAAO,UAA4B,CACjC,MAAMC,EAAU,KACVC,EAAO,UAEPC,EAAQ,IAAM,CAClBH,EAAU,KACLD,GAAWF,EAAK,MAAMI,EAASC,CAAI,CAC9C,EAEUE,EAAUL,GAAa,CAACC,EAC9B,aAAaA,CAAO,EACpBA,EAAU,WAAWG,EAAOL,CAAI,EAE5BM,GAASP,EAAK,MAAMI,EAASC,CAAI,CACzC,CACA,EAEMG,EAAuB,WACvBC,EAAO,SAAS,cAAc,gBAAgB,EAE9CC,EAAc,IAAM,CACxB,MAAMC,EAAW,IAAI,SAASF,CAAI,EAC5BG,EAAa,CAAA,EAEnB,OAAAD,EAAS,QAAQ,CAACE,EAAOC,IAAQ,CAC/BF,EAAWE,GAAOD,EAAM,KAAI,CAChC,CAAG,EAEMD,CACT,EAEA,GAAI,CACF,MAAMG,EACJ,KAAK,MAAM,aAAa,QAAQP,CAAoB,CAAC,GAAK,GAE5D,MAAM,KAAKC,EAAK,QAAQ,EAAE,QAAQO,GAAW,CAC3C,MAAMC,EAAeF,EAAgBC,EAAQ,MAEXC,GAAiB,OACjDD,EAAQ,MAAQC,EAEtB,CAAG,CACH,OAASC,EAAP,CACA,QAAQ,MAAM,4CAA6CA,CAAK,CAClE,CAEA,MAAMC,EAA8BpB,EAAS,IAAM,CACjD,MAAMa,EAAaF,IACnB,aAAa,QAAQF,EAAsB,KAAK,UAAUI,CAAU,CAAC,CACvE,EAAG,GAAG,EAENH,EAAK,iBAAiB,QAAS,IAAM,CACnCU,GACF,CAAC,EAEDV,EAAK,iBAAiB,SAAUW,GAAS,CACvCA,EAAM,eAAc,EAEpB,MAAMR,EAAaF,IACC,OAAO,OAAOE,CAAU,EAAE,MAAMC,GAAS,CAAC,CAACA,EAAM,KAAM,CAAA,GAGzE,QAAQ,IAAID,CAAU,EACtB,aAAa,WAAWJ,CAAoB,EAC5CC,EAAK,MAAK,GAEV,MAAM,qCAAqC,CAE/C,CAAC"}